<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Projectile Range Visualizer</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeIn 0.8s ease-in;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .theme-toggle, .reset-btn, .graph-type-select {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover, .reset-btn:hover, .graph-type-select:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .graph-type-select {
            background: rgba(255,255,255,0.95);
            color: #333;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            padding-right: 30px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path fill="%23333" d="M7 10l5 5 5-5z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 10px center;
        }

        .x-axis-select {
            display: none;
            background: rgba(255,255,255,0.95);
            color: #333;
            padding: 10px 20px;
            border-radius: 25px;
            border: 2px solid rgba(255,255,255,0.3);
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .x-axis-select.active {
            display: inline-block;
        }

        .x-axis-select:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .formula-section { 
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            animation: slideIn 0.5s ease;
        }

        .formula-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 3px solid #f0f0f0;
            flex-wrap: wrap;
            gap: 15px;
        }

        .formula-title { 
            font-size: 1.8em;
            font-weight: 700;
            color: #333;
        }

        .result-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            font-size: 1.3em;
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            text-align: center;
            min-width: 200px;
        }

        .formula-description {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .formula-description h3 {
            color: #667eea;
            margin-bottom: 8px;
        }

        .formula-description p {
            line-height: 1.6;
            color: #555;
        }

        .params-grid {
            display: grid;
            gap: 20px;
            margin-bottom: 25px;
        }

        .param { 
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .param:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .param-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .param label { 
            font-weight: 600;
            font-size: 1em;
            color: #333;
        }

        .param-value {
            background: white;
            padding: 8px 15px;
            border-radius: 8px;
            font-weight: 700;
            color: #667eea;
            font-size: 1.1em;
            min-width: 80px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .param-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .param input[type="range"] { 
            flex: 1;
            height: 8px;
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
            background: linear-gradient(to right, #667eea 0%, #764ba2 100%);
        }

        .param input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            border: 3px solid #667eea;
        }

        .param input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            border: 3px solid #667eea;
        }

        .param input[type="number"] { 
            width: 100px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            text-align: center;
            font-weight: 600;
        }

        .param input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-top: 25px;
        }

        #chart4, #plotly-chart {
            max-width: 100%;
            height: 400px !important;
        }

        .presets {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .preset-btn {
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .preset-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }

        body.dark-mode .formula-section,
        body.dark-mode .chart-container {
            background: rgba(30, 30, 50, 0.95);
            color: #e0e0e0;
        }

        body.dark-mode .formula-title,
        body.dark-mode .param label {
            color: #e0e0e0;
        }

        body.dark-mode .param {
            background: rgba(40, 40, 60, 0.8);
        }

        body.dark-mode .param:hover {
            background: rgba(50, 50, 70, 0.8);
        }

        body.dark-mode .formula-description {
            background: rgba(40, 40, 60, 0.8);
            border-left-color: #667eea;
        }

        body.dark-mode .formula-description h3 {
            color: #8b9cff;
        }

        body.dark-mode .formula-description p {
            color: #b0b0b0;
        }

        body.dark-mode .param-value {
            background: rgba(50, 50, 70, 0.8);
            color: #8b9cff;
        }

        body.dark-mode .param input[type="number"],
        body.dark-mode .graph-type-select,
        body.dark-mode .x-axis-select {
            background: rgba(50, 50, 70, 0.8);
            border-color: #555;
            color: #e0e0e0;
        }

        body.dark-mode .preset-btn {
            background: rgba(40, 40, 60, 0.8);
            border-color: #8b9cff;
            color: #8b9cff;
        }

        body.dark-mode .preset-btn:hover {
            background: #667eea;
            color: white;
        }

        body.dark-mode .graph-type-select {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path fill="%23e0e0e0" d="M7 10l5 5 5-5z"/></svg>');
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            header h1 { font-size: 1.8em; }
            .formula-title { font-size: 1.4em; }
            .result-display { font-size: 1.1em; min-width: 150px; }
            .param-controls { flex-direction: column; }
            #chart4, #plotly-chart { height: 300px !important; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Interactive Projectile Range Visualizer</h1>
            <p>Explore the projectile range formula with interactive visualizations</p>
        </header>

        <div class="controls">
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode">üåì Toggle Dark Mode</button>
            <button class="reset-btn" onclick="resetAll()" aria-label="Reset all parameters">‚Ü∫ Reset All</button>
            <select class="graph-type-select" id="graph-type" onchange="updateGraphType()" aria-label="Select graph type">
                <option value="line">2D Line Graph</option>
                <option value="scatter">2D Scatter Plot</option>
                <option value="bar">Bar Chart</option>
                <option value="bubble">Bubble Chart</option>
                <option value="polarArea">Polar Area Chart</option>
                <option value="surface">3D Surface Plot</option>
                <option value="heatmap">Heatmap</option>
                <option value="contour">Contour Plot</option>
            </select>
            <select class="x-axis-select" id="x-axis-param" onchange="updateCharts()" aria-label="Select x-axis parameter for 2D charts">
                <option value="theta4">Angle (Œ∏)</option>
                <option value="v4">Initial Velocity (v)</option>
                <option value="g4">Gravity (g)</option>
                <option value="k4">Drag Coefficient (k)</option>
                <option value="t4">Time (t)</option>
            </select>
        </div>

        <div class="formula-section" id="projectile">
            <div class="formula-header">
                <div class="formula-title">üöÄ Projectile Range</div>
                <div class="result-display" id="result4">R = 255.1 m</div>
            </div>
            
            <div class="formula-description">
                <h3>What is this?</h3>
                <p>This formula calculates the horizontal range of a projectile, accounting for initial velocity, launch angle, gravity, air resistance, and time of flight. The range depends strongly on the angle and velocity, with air resistance reducing the distance traveled.</p>
            </div>

            <div class="presets">
                <button class="preset-btn" onclick="setPreset4('cannon')" aria-label="Preset: Cannon Ball">üí£ Cannon Ball</button>
                <button class="preset-btn" onclick="setPreset4('arrow')" aria-label="Preset: Arrow Shot">üèπ Arrow Shot</button>
                <button class="preset-btn" onclick="setPreset4('noair')" aria-label="Preset: No Air Resistance">üå¨Ô∏è No Air Resistance</button>
            </div>

            <div class="params-grid">
                <div class="param">
                    <div class="param-header">
                        <label for="v4">Initial Velocity (v)</label>
                        <div class="param-value" id="v4-display">50.0 m/s</div>
                    </div>
                    <div class="param-controls">
                        <input type="range" id="v4" min="0" max="100" value="50" step="1" aria-label="Initial velocity">
                        <input type="number" id="v4-num" min="0" max="100" value="50" step="1" aria-label="Initial velocity value">
                    </div>
                </div>
                <div class="param">
                    <div class="param-header">
                        <label for="theta4">Angle (Œ∏)</label>
                        <div class="param-value" id="theta4-display">45.0 ¬∞</div>
                    </div>
                    <div class="param-controls">
                        <input type="range" id="theta4" min="0" max="90" value="45" step="1" aria-label="Launch angle">
                        <input type="number" id="theta4-num" min="0" max="90" value="45" step="1" aria-label="Launch angle value">
                    </div>
                </div>
                <div class="param">
                    <div class="param-header">
                        <label for="g4">Gravity (g)</label>
                        <div class="param-value" id="g4-display">9.8 m/s¬≤</div>
                    </div>
                    <div class="param-controls">
                        <input type="range" id="g4" min="1" max="20" value="9.8" step="0.1" aria-label="Gravity">
                        <input type="number" id="g4-num" min="1" max="20" value="9.8" step="0.1" aria-label="Gravity value">
                    </div>
                </div>
                <div class="param">
                    <div class="param-header">
                        <label for="k4">Drag Coefficient (k)</label>
                        <div class="param-value" id="k4-display">0.1 1/s</div>
                    </div>
                    <div class="param-controls">
                        <input type="range" id="k4" min="0" max="1" value="0.1" step="0.01" aria-label="Drag coefficient">
                        <input type="number" id="k4-num" min="0" max="1" value="0.1" step="0.01" aria-label="Drag coefficient value">
                    </div>
                </div>
                <div class="param">
                    <div class="param-header">
                        <label for="t4">Time (t)</label>
                        <div class="param-value" id="t4-display">5.0 s</div>
                    </div>
                    <div class="param-controls">
                        <input type="range" id="t4" min="0" max="20" value="5" step="0.5" aria-label="Time of flight">
                        <input type="number" id="t4-num" min="0" max="20" value="5" step="0.5" aria-label="Time of flight value">
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <canvas id="chart4" style="display: block;"></canvas>
                <div id="plotly-chart" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script>
        const defaults = {
            v4: 50, theta4: 45, g4: 9.8, k4: 0.1, t4: 5
        };

        let chart4;
        let currentGraphType = 'line';
        let currentXAxis = 'theta4';

        function syncInputs(sliderId, numId, displayId) {
            const slider = document.getElementById(sliderId);
            const num = document.getElementById(numId);
            const display = document.getElementById(displayId);
            
            slider.addEventListener('input', () => { 
                num.value = slider.value; 
                updateDisplay(displayId, slider.value, sliderId);
                updateCharts(); 
            });
            num.addEventListener('input', () => { 
                let value = parseFloat(num.value);
                if (isNaN(value) || value < num.min || value > num.max) {
                    value = Math.max(num.min, Math.min(num.max, defaults[sliderId]));
                    num.value = value;
                }
                slider.value = value; 
                updateDisplay(displayId, value, sliderId);
                updateCharts(); 
            });
        }

        function updateDisplay(displayId, value, paramId) {
            const display = document.getElementById(displayId);
            const val = parseFloat(value);
            let unit = '';
            
            if (paramId.includes('v')) unit = ' m/s';
            else if (paramId.includes('g')) unit = ' m/s¬≤';
            else if (paramId.includes('t')) unit = ' s';
            else if (paramId.includes('theta')) unit = ' ¬∞';
            else if (paramId.includes('k')) unit = ' 1/s';
            
            display.textContent = val.toFixed(1) + unit;
        }

        function calculateRange(v, theta, g, k, t) {
            const rad = theta * Math.PI / 180;
            return (v * v * Math.sin(2 * rad)) / g * Math.exp(-k * t);
        }

        function initCharts() {
            chart4 = new Chart(document.getElementById('chart4'), {
                type: 'line',
                data: { 
                    labels: [], 
                    datasets: [{ 
                        label: 'Range (m)', 
                        data: [], 
                        borderColor: '#f59e0b', 
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        fill: true,
                        tension: 0.4,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }] 
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: true, position: 'top' }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    scales: { 
                        x: { 
                            title: { display: true, text: 'Angle (¬∞)' },
                            grid: { color: 'rgba(0,0,0,0.05)' }
                        }, 
                        y: { 
                            title: { display: true, text: 'Range (m)' },
                            grid: { color: 'rgba(0,0,0,0.05)' },
                            beginAtZero: true
                        } 
                    }
                }
            });

            updateCharts();
        }

        function updateCharts() {
            const v4 = parseFloat(document.getElementById('v4').value);
            const theta4 = parseFloat(document.getElementById('theta4').value);
            const g4 = parseFloat(document.getElementById('g4').value);
            const k4 = parseFloat(document.getElementById('k4').value);
            const t4 = parseFloat(document.getElementById('t4').value);

            const finalR = calculateRange(v4, theta4, g4, k4, t4);
            document.getElementById('result4').textContent = `R = ${finalR.toFixed(1)} m`;

            if (['line', 'scatter', 'bar'].includes(currentGraphType)) {
                document.getElementById('chart4').style.display = 'block';
                document.getElementById('plotly-chart').style.display = 'none';

                let xValues, xLabel, xData;
                switch (currentXAxis) {
                    case 'theta4':
                        xValues = Array.from({length: 10}, (_, i) => i * 90 / 9);
                        xLabel = 'Angle (¬∞)';
                        xData = xValues.map(theta => calculateRange(v4, theta, g4, k4, t4));
                        break;
                    case 'v4':
                        xValues = Array.from({length: 10}, (_, i) => i * 100 / 9);
                        xLabel = 'Initial Velocity (m/s)';
                        xData = xValues.map(v => calculateRange(v, theta4, g4, k4, t4));
                        break;
                    case 'g4':
                        xValues = Array.from({length: 10}, (_, i) => 1 + i * 19 / 9);
                        xLabel = 'Gravity (m/s¬≤)';
                        xData = xValues.map(g => calculateRange(v4, theta4, g, k4, t4));
                        break;
                    case 'k4':
                        xValues = Array.from({length: 10}, (_, i) => i * 1 / 9);
                        xLabel = 'Drag Coefficient (1/s)';
                        xData = xValues.map(k => calculateRange(v4, theta4, g4, k, t4));
                        break;
                    case 't4':
                        xValues = Array.from({length: 10}, (_, i) => i * 20 / 9);
                        xLabel = 'Time (s)';
                        xData = xValues.map(t => calculateRange(v4, theta4, g4, k4, t));
                        break;
                }

                chart4.config.type = currentGraphType;
                chart4.options.scales = {
                    x: {
                        title: { display: true, text: xLabel },
                        grid: { color: 'rgba(0,0,0,0.05)' }
                    },
                    y: {
                        title: { display: true, text: 'Range (m)' },
                        grid: { color: 'rgba(0,0,0,0.05)' },
                        beginAtZero: true
                    }
                };
                chart4.data.labels = xValues.map(x => x.toFixed(1));
                chart4.data.datasets[0].data = currentGraphType === 'scatter' ? xData.map((y, i) => ({x: xValues[i], y})) : xData;
                chart4.data.datasets[0].fill = currentGraphType === 'line';
                chart4.data.datasets[0].pointRadius = currentGraphType === 'scatter' ? 5 : 4;
                chart4.data.datasets[0].backgroundColor = currentGraphType === 'bar' ? '#f59e0b' : 'rgba(245, 158, 11, 0.1)';
                chart4.update('none');
            } else if (currentGraphType === 'bubble') {
                document.getElementById('chart4').style.display = 'block';
                document.getElementById('plotly-chart').style.display = 'none';

                const thetaValues = Array.from({length: 10}, (_, i) => i * 90 / 9);
                const vValues = Array.from({length: 10}, (_, i) => i * 100 / 9);
                const bubbleData = [];
                thetaValues.forEach(theta => {
                    vValues.forEach(v => {
                        const r = calculateRange(v, theta, g4, k4, t4);
                        bubbleData.push({x: theta, y: v, r: Math.min(r / 50, 20)});
                    });
                });

                chart4.config.type = 'bubble';
                chart4.options.scales = {
                    x: {
                        title: { display: true, text: 'Angle (¬∞)' },
                        grid: { color: 'rgba(0,0,0,0.05)' }
                    },
                    y: {
                        title: { display: true, text: 'Velocity (m/s)' },
                        grid: { color: 'rgba(0,0,0,0.05)' }
                    }
                };
                chart4.data.labels = [];
                chart4.data.datasets[0].data = bubbleData;
                chart4.data.datasets[0].backgroundColor = 'rgba(245, 158, 11, 0.5)';
                chart4.update('none');
            } else if (currentGraphType === 'polarArea') {
                document.getElementById('chart4').style.display = 'block';
                document.getElementById('plotly-chart').style.display = 'none';

                const thetaValues = Array.from({length: 10}, (_, i) => i * 90 / 9);
                const xData = thetaValues.map(theta => calculateRange(v4, theta, g4, k4, t4));

                chart4.config.type = 'polarArea';
                chart4.options.scales = {
                    r: {
                        ticks: { display: true },
                        grid: { color: 'rgba(0,0,0,0.05)' }
                    }
                };
                chart4.options.plugins.legend.display = true;
                chart4.data.labels = thetaValues.map(theta => theta.toFixed(1) + '¬∞');
                chart4.data.datasets[0].data = xData;
                chart4.data.datasets[0].backgroundColor = 'rgba(245, 158, 11, 0.5)';
                chart4.update('none');
            } else if (['surface', 'heatmap', 'contour'].includes(currentGraphType)) {
                document.getElementById('chart4').style.display = 'none';
                document.getElementById('plotly-chart').style.display = 'block';

                const thetaValues = Array.from({length: 50}, (_, i) => i * 90 / 49);
                const vValues = Array.from({length: 50}, (_, i) => i * 100 / 49);
                const zData = thetaValues.map(theta => 
                    vValues.map(v => calculateRange(v, theta, g4, k4, t4))
                );

                const data = [{
                    x: thetaValues,
                    y: vValues,
                    z: zData,
                    type: currentGraphType,
                    colorscale: 'Viridis',
                    showscale: true
                }];

                const layout = currentGraphType === 'surface' ? {
                    scene: {
                        xaxis: { title: 'Angle (¬∞)' },
                        yaxis: { title: 'Velocity (m/s)' },
                        zaxis: { title: 'Range (m)' }
                    },
                    margin: { l: 0, r: 0, t: 30, b: 0 },
                    height: 400
                } : {
                    xaxis: { title: 'Angle (¬∞)' },
                    yaxis: { title: 'Velocity (m/s)' },
                    margin: { l: 50, r: 50, t: 30, b: 50 },
                    height: 400
                };

                Plotly.newPlot('plotly-chart', data, layout, { responsive: true });
            }
        }

        function updateGraphType() {
            currentGraphType = document.getElementById('graph-type').value;
            document.getElementById('x-axis-param').classList.toggle('active', ['line', 'scatter', 'bar'].includes(currentGraphType));
            updateCharts();
        }

        function setPreset4(type) {
            if (type === 'cannon') {
                setValues('v4', 50, 'theta4', 45, 'g4', 9.8, 'k4', 0.1, 't4', 5);
            } else if (type === 'arrow') {
                setValues('v4', 30, 'theta4', 30, 'g4', 9.8, 'k4', 0.2, 't4', 3);
            } else if (type === 'noair') {
                setValues('v4', 50, 'theta4', 45, 'g4', 9.8, 'k4', 0, 't4', 5);
            }
            updateAllDisplays();
            updateCharts();
        }

        function setValues(...args) {
            for (let i = 0; i < args.length; i += 2) {
                const id = args[i];
                const val = args[i + 1];
                const slider = document.getElementById(id);
                const num = document.getElementById(id + '-num');
                slider.value = val;
                num.value = val;
            }
        }

        function updateAllDisplays() {
            updateDisplay('v4-display', document.getElementById('v4').value, 'v4');
            updateDisplay('theta4-display', document.getElementById('theta4').value, 'theta4');
            updateDisplay('g4-display', document.getElementById('g4').value, 'g4');
            updateDisplay('k4-display', document.getElementById('k4').value, 'k4');
            updateDisplay('t4-display', document.getElementById('t4').value, 't4');
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
        }

        function resetAll() {
            for (const key in defaults) {
                const slider = document.getElementById(key);
                const num = document.getElementById(`${key}-num`);
                slider.value = defaults[key];
                num.value = defaults[key];
            }
            updateAllDisplays();
            updateCharts();
        }

        // Set up syncing for sliders and number inputs
        ['v4', 'theta4', 'g4', 'k4', 't4'].forEach(id => {
            syncInputs(id, id + '-num', id + '-display');
        });

        // Initialize charts and event listeners
        initCharts();
        updateAllDisplays();
        document.getElementById('x-axis-param').addEventListener('change', () => {
            currentXAxis = document.getElementById('x-axis-param').value;
            updateCharts();
        });
    </script>
</body>
</html>
